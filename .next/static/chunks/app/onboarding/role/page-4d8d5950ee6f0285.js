(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{266:function(e,t,r){Promise.resolve().then(r.bind(r,9981))},9981:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),s=r(2265),a=r(9376),i=r(3640);function l(){let e=(0,a.useRouter)(),[t,r]=(0,s.useState)("creator"),[l,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),p=async r=>{r.preventDefault(),d(!0),x(null);let n=(0,i.B)(),{data:{user:s}}=await n.auth.getUser();if(!s){e.replace("/login");return}let{error:a}=await n.from("profiles").upsert({user_id:s.id,role:t,display_name:l||null},{onConflict:"user_id"});if(a){x(a.message),d(!1);return}e.replace("creator"===t?"/creator":"/brand"),e.refresh()};return(0,n.jsxs)("form",{onSubmit:p,className:"flex w-full max-w-xl flex-col gap-6 rounded-3xl border border-white/60 bg-white/80 p-8 shadow-soft",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-display text-2xl text-ink-900",children:"Choose your path"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-ink-700",children:"You can switch later, but we need to set up your first workspace."})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-ink-700",children:["Display name",(0,n.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Jordan Lee",className:"rounded-2xl border border-ink-900/10 bg-white px-4 py-3 text-ink-900"})]}),(0,n.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:["creator","brand"].map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>r(e),className:"rounded-2xl border px-4 py-4 text-left text-sm transition ".concat(t===e?"border-ink-900 bg-ink-900 text-white":"border-ink-900/10 bg-white text-ink-900"),children:[(0,n.jsx)("p",{className:"font-semibold capitalize",children:e}),(0,n.jsx)("p",{className:"mt-1 text-xs opacity-80",children:"creator"===e?"Browse contracts and pitch brands.":"Post contracts and hire creators."})]},e))}),u?(0,n.jsx)("p",{className:"text-sm text-red-600",children:u}):null,(0,n.jsx)("button",{type:"submit",disabled:c,className:"rounded-full bg-ink-900 px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5 disabled:opacity-60",children:c?"Saving...":"Continue"})]})}},3640:function(e,t,r){"use strict";r.d(t,{B:function(){return s}});var n=r(5452);let s=()=>(0,n.createClientComponentClient)()}},function(e){e.O(0,[523,971,117,744],function(){return e(e.s=266)}),_N_E=e.O()}]);