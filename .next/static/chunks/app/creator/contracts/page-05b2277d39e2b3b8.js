(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{3512:function(e,t,n){Promise.resolve().then(n.bind(n,9923))},9923:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var s=n(7437),i=n(2265),l=n(9376),r=n(3640);function a(e){let{id:t,title:n,description:a,minValueCents:c,nicheTags:d,platforms:o,initiallySaved:u,initialApplicationStatus:x}=e,p=(0,l.useRouter)(),[h,m]=(0,i.useState)(u),[b,f]=(0,i.useState)(!1),[g,k]=(0,i.useState)(!1),[j,y]=(0,i.useState)(""),[N,w]=(0,i.useState)(!1),[v,S]=(0,i.useState)(null),[_,C]=(0,i.useState)(x),A=async()=>{f(!0);let e=(0,r.B)();if(h){await e.from("saved_contracts").delete().eq("contract_id",t),m(!1),f(!1),p.refresh();return}let{error:n}=await e.from("saved_contracts").insert({contract_id:t});n||(m(!0),p.refresh()),f(!1)},B=async()=>{if(!j.trim()){S("Add a short pitch before submitting.");return}w(!0),S(null);let e=(0,r.B)(),{error:n}=await e.from("applications").insert({contract_id:t,pitch:j.trim()});if(n){"23505"===n.code?S("You have already applied to this contract."):S(n.message),w(!1);return}C("submitted"),k(!1),y(""),w(!1),p.refresh()};return(0,s.jsxs)("article",{className:"flex flex-col gap-4 rounded-3xl border border-white/60 bg-white/80 p-6 shadow-soft",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-display text-xl text-ink-900",children:n}),(0,s.jsx)("p",{className:"mt-2 text-sm text-ink-700",children:a})]}),(0,s.jsxs)("div",{className:"text-xs text-ink-700",children:[(0,s.jsxs)("p",{children:["Minimum: ",new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0}).format(c/100)]}),(0,s.jsxs)("p",{children:["Tags: ",d.length?d.join(", "):"—"]}),(0,s.jsxs)("p",{children:["Platforms: ",o.length?o.join(", "):"—"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:A,disabled:b,className:"rounded-full border border-ink-900/20 bg-white px-4 py-2 text-xs font-semibold text-ink-900",children:b?"Saving...":h?"Saved":"Save"}),(0,s.jsx)("button",{type:"button",onClick:()=>k(e=>!e),disabled:null!==_,className:"rounded-full bg-ink-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-60",children:_?"Applied":"Apply"}),_?(0,s.jsx)("span",{className:"text-xs uppercase tracking-[0.2em] text-ink-700",children:_.replace(/_/g," ")}):null]}),g&&!_?(0,s.jsxs)("div",{className:"flex flex-col gap-3 rounded-2xl border border-ink-900/10 bg-white/90 p-4",children:[(0,s.jsxs)("label",{className:"flex flex-col gap-2 text-xs text-ink-700",children:["Pitch",(0,s.jsx)("textarea",{rows:4,value:j,onChange:e=>y(e.target.value),placeholder:"Share your idea and timeline.",className:"rounded-xl border border-ink-900/10 bg-white px-3 py-2 text-sm text-ink-900"})]}),v?(0,s.jsx)("p",{className:"text-xs text-red-600",children:v}):null,(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:B,disabled:N,className:"rounded-full bg-ink-900 px-4 py-2 text-xs font-semibold text-white disabled:opacity-60",children:N?"Submitting...":"Submit application"}),(0,s.jsx)("button",{type:"button",onClick:()=>k(!1),className:"rounded-full border border-ink-900/20 bg-white px-4 py-2 text-xs font-semibold text-ink-900",children:"Cancel"})]})]}):null]})}},3640:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var s=n(5452);let i=()=>(0,s.createClientComponentClient)()}},function(e){e.O(0,[523,971,117,744],function(){return e(e.s=3512)}),_N_E=e.O()}]);