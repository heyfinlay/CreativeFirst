(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626,966],{1801:function(e,t,n){Promise.resolve().then(n.t.bind(n,2972,23)),Promise.resolve().then(n.bind(n,2513))},2513:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var a=n(7437),r=n(2265),l=n(9376),i=n(3640);function s(e){let{mode:t}=e,n=(0,l.useRouter)(),[s,o]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),g=async()=>{let e=(0,i.B)(),{data:{user:t}}=await e.auth.getUser();if(!t){n.replace("/login");return}let{data:a}=await e.from("profiles").select("role").eq("user_id",t.id).maybeSingle();if(!(null==a?void 0:a.role)){n.replace("/onboarding/role");return}n.replace("creator"===a.role?"/creator":"/brand")},b=async e=>{e.preventDefault(),f(null),h(null),x(!0);let n=(0,i.B)();try{if("signup"===t){let{data:e,error:t}=await n.auth.signUp({email:s,password:u});if(t){f(t.message);return}if(!e.session){h("Check your email to confirm your account.");return}await g();return}let{error:e}=await n.auth.signInWithPassword({email:s,password:u});if(e){f(e.message);return}await g()}finally{x(!1)}};return(0,a.jsxs)("form",{onSubmit:b,className:"flex w-full max-w-md flex-col gap-4 rounded-3xl border border-white/60 bg-white/80 p-8 shadow-soft",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-display text-2xl text-ink-900",children:"login"===t?"Welcome back":"Create your account"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-ink-700",children:"login"===t?"Sign in to keep contracts moving.":"Join Creative First and choose your path."})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-ink-700",children:["Email",(0,a.jsx)("input",{type:"email",required:!0,value:s,onChange:e=>o(e.target.value),className:"rounded-2xl border border-ink-900/10 bg-white px-4 py-3 text-ink-900"})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-ink-700",children:["Password",(0,a.jsx)("input",{type:"password",required:!0,minLength:6,value:u,onChange:e=>c(e.target.value),className:"rounded-2xl border border-ink-900/10 bg-white px-4 py-3 text-ink-900"})]}),m?(0,a.jsx)("p",{className:"text-sm text-red-600",children:m}):null,p?(0,a.jsx)("p",{className:"text-sm text-ink-700",children:p}):null,(0,a.jsx)("button",{type:"submit",disabled:d,className:"rounded-full bg-ink-900 px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5 disabled:opacity-60",children:d?"Please wait...":"login"===t?"Sign in":"Sign up"})]})}},3640:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var a=n(5452);let r=()=>(0,a.createClientComponentClient)()}},function(e){e.O(0,[972,523,971,117,744],function(){return e(e.s=1801)}),_N_E=e.O()}]);