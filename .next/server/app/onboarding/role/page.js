(()=>{var e={};e.id=477,e.ids=[477],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4561:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(1432),t(2029),t(5866);var a=t(3191),s=t(8716),n=t(7922),i=t.n(n),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["onboarding",{children:["role",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1432)),"/Users/finlaysturzaker/Desktop/CreatorFirst/src/app/onboarding/role/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/finlaysturzaker/Desktop/CreatorFirst/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/finlaysturzaker/Desktop/CreatorFirst/src/app/onboarding/role/page.tsx"],u="/onboarding/role/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/onboarding/role/page",pathname:"/onboarding/role",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5170:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},6052:()=>{},667:(e,r,t)=>{Promise.resolve().then(t.bind(t,4753))},4753:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(326),s=t(7577),n=t(5047),i=t(5013);function o(){let e=(0,n.useRouter)(),[r,t]=(0,s.useState)("creator"),[o,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null),x=async t=>{t.preventDefault(),c(!0),p(null);let a=(0,i.B)(),{data:{user:s}}=await a.auth.getUser();if(!s){e.replace("/login");return}let{error:n}=await a.from("profiles").upsert({user_id:s.id,role:r,display_name:o||null},{onConflict:"user_id"});if(n){p(n.message),c(!1);return}e.replace("creator"===r?"/creator":"/brand"),e.refresh()};return(0,a.jsxs)("form",{onSubmit:x,className:"flex w-full max-w-xl flex-col gap-6 rounded-3xl border border-white/60 bg-white/80 p-8 shadow-soft",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"font-display text-2xl text-ink-900",children:"Choose your path"}),a.jsx("p",{className:"mt-2 text-sm text-ink-700",children:"You can switch later, but we need to set up your first workspace."})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-ink-700",children:["Display name",a.jsx("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Jordan Lee",className:"rounded-2xl border border-ink-900/10 bg-white px-4 py-3 text-ink-900"})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:["creator","brand"].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>t(e),className:`rounded-2xl border px-4 py-4 text-left text-sm transition ${r===e?"border-ink-900 bg-ink-900 text-white":"border-ink-900/10 bg-white text-ink-900"}`,children:[a.jsx("p",{className:"font-semibold capitalize",children:e}),a.jsx("p",{className:"mt-1 text-xs opacity-80",children:"creator"===e?"Browse contracts and pitch brands.":"Post contracts and hire creators."})]},e))}),u?a.jsx("p",{className:"text-sm text-red-600",children:u}):null,a.jsx("button",{type:"submit",disabled:d,className:"rounded-full bg-ink-900 px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5 disabled:opacity-60",children:d?"Saving...":"Continue"})]})}},5013:(e,r,t)=>{"use strict";t.d(r,{B:()=>s});var a=t(9813);let s=()=>(0,a.createClientComponentClient)()},2029:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,metadata:()=>l});var a=t(9510),s=t(7098),n=t.n(s),i=t(160),o=t.n(i);t(5023);let l={title:"Creative First",description:"Australia-first creator marketplace with a human touch."};function d({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:`${n().variable} ${o().variable} page-shell`,children:e})})}},1432:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(9510),s=t(8585);let n=(0,t(8570).createProxy)(String.raw`/Users/finlaysturzaker/Desktop/CreatorFirst/src/components/role-selector.tsx#default`);var i=t(5456);async function o(){let{user:e,profile:r}=await (0,i.xb)();return e||(0,s.redirect)("/login"),r?.role&&(0,s.redirect)("creator"===r.role?"/creator":"/brand"),a.jsx("main",{className:"min-h-screen px-6 py-16",children:a.jsx("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-10",children:a.jsx(n,{})})})}},5456:(e,r,t)=>{"use strict";t.d(r,{MH:()=>i,xb:()=>n});var a=t(8585),s=t(5655);async function n(){let e=(0,s.f)(),{data:{user:r}}=await e.auth.getUser();if(!r)return{user:null,profile:null};let{data:t}=await e.from("profiles").select("role, display_name").eq("user_id",r.id).maybeSingle();return{user:r,profile:t}}async function i(e){let{user:r,profile:t}=await n();return r||(0,a.redirect)("/login"),t?.role||(0,a.redirect)("/onboarding/role"),t.role!==e&&("creator"===t.role&&(0,a.redirect)("/creator"),"brand"===t.role&&(0,a.redirect)("/brand"),(0,a.redirect)("/")),{user:r,profile:t}}},5655:(e,r,t)=>{"use strict";t.d(r,{f:()=>n});var a=t(1615),s=t(344);let n=()=>(0,s.createServerComponentClient)({cookies:a.cookies})},5023:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[103,545,828],()=>t(4561));module.exports=a})();